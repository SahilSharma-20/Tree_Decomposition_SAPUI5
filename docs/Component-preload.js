//@ui5-bundle tmt/treemap/Component-preload.js
sap.ui.predefine("tmt/treemap/Component", ["sap/ui/core/UIComponent","tmt/treemap/model/models"],function(e,t){"use strict";return e.extend("tmt.treemap.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("tmt/treemap/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("tmt.treemap.controller.App",{onInit(){}})});
sap.ui.predefine("tmt/treemap/controller/Main.controller", ["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("tmt.treemap.controller.Main",{goTreeMap(){const e=this.byId("consInput").getValue();if(!e)return;this.getOwnerComponent().getRouter().navTo("TreeMap",{cons:e})}})});
sap.ui.predefine("tmt/treemap/controller/TreeMap.controller", ["sap/ui/core/mvc/Controller","tmt/treemap/model/Data"],function(t,e){"use strict";return t.extend("tmt.treemap.controller.TreeMap",{onAfterRendering:function(){const t=document.getElementById("d3DecompTree");if(!t){console.error("Decomposition Tree container not found.");return}t.innerHTML="";const r=e.getTreeData();const n=t.clientWidth||960;const a=t.clientHeight||600;const l={top:20,right:120,bottom:20,left:120};const o=d3.select(t).append("svg").attr("width",n).attr("height",a).call(d3.zoom().scaleExtent([.5,3]).on("zoom",i)).append("g").attr("transform",`translate(${l.left},${l.top})`);function i(t){o.attr("transform",t.transform)}let s=0,c=750,d;const f=d3.tree().size([a-l.top-l.bottom,n-l.left-l.right]);d=d3.hierarchy(r,t=>t.children);d.x0=(a-l.top-l.bottom)/2;d.y0=0;d.children.forEach(p);h(d);function p(t){if(t.children){t._children=t.children;t._children.forEach(p);t.children=null}}function h(t){let e=f(d);let r=e.descendants(),i=e.descendants().slice(1);r.forEach(t=>t.y=t.depth*180);let p=o.selectAll("g.node").data(r,t=>t.id||(t.id=++s));let x=p.enter().append("g").attr("class","node").attr("transform",e=>`translate(${t.y0},${t.x0})`).call(d3.drag().on("start",k).on("drag",v).on("end",D)).on("click",(t,e)=>{if(e.children){e._children=e.children;e.children=null}else{e.children=e._children;e._children=null}h(e)});x.append("circle").attr("class","node").attr("r",1e-6).style("fill",t=>t._children?"#ffb347":"#d94f70").style("cursor","pointer");x.append("text").attr("dy",".35em").attr("x",t=>t.children||t._children?-13:13).attr("text-anchor",t=>t.children||t._children?"end":"start").text(t=>t.data.name).style("user-select","none");x.append("text").attr("class","plus-button").attr("x",20).attr("y",-10).attr("font-size","16px").attr("cursor","pointer").text("+").on("click",(t,e)=>{t.stopPropagation();E(e,d3.select(t.currentTarget.parentNode))});let y=x.merge(p);y.transition().duration(c).attr("transform",t=>`translate(${t.y},${t.x})`);y.select("circle.node").attr("r",8).style("fill",t=>t._children?"#ffb347":"#d94f70").attr("cursor","pointer");let u=p.exit().transition().duration(c).attr("transform",e=>`translate(${t.y},${t.x})`).remove();u.select("circle").attr("r",1e-6);u.select("text").style("fill-opacity",1e-6);let m=o.selectAll("path.link").data(i,t=>t.id);let $=m.enter().insert("path","g").attr("class","link").attr("d",e=>{let r={x:t.x0,y:t.y0};return b(r,r)}).style("fill","none").style("stroke","#ccc").style("stroke-width","2px");let g=$.merge(m);g.transition().duration(c).attr("d",t=>b(t,t.parent));let _=m.exit().transition().duration(c).attr("d",e=>{let r={x:t.x,y:t.y};return b(r,r)}).remove();r.forEach(t=>{t.x0=t.x;t.y0=t.y});function b(t,e){return`M ${t.y} ${t.x}\n                            C ${(t.y+e.y)/2} ${t.x},\n                              ${(t.y+e.y)/2} ${e.x},\n                              ${e.y} ${e.x}`}function k(t,e){d3.select(this).raise().classed("active",true)}function v(t,e){e.x=t.y;e.y=t.x;d3.select(this).attr("transform",`translate(${e.y},${e.x})`);h(e)}function D(t,e){d3.select(this).classed("active",false)}function E(t,e){const r=e.select("g.detail-card");if(!r.empty()){r.remove();e.select(".plus-button").text("+");return}e.select(".plus-button").text("âˆ’");const o=220,i=90;let s=30;let c=20;if(t.y+o+l.left>n){s=-o-20}if(t.x+i+l.top>a){c=-(i+10)}const d=e.append("g").attr("class","detail-card").attr("transform",`translate(${s},${c})`);d.append("rect").attr("width",o).attr("height",i).attr("rx",6).attr("ry",6).style("fill","#f9f9f9").style("stroke","#999").style("stroke-width","1.5px").style("filter","drop-shadow(2px 2px 4px #aaa)");const f=t.data.details||{};const p=[`Plant: ${f.plant||"-"}`,`Material Name: ${f.materialName||"-"}`,`Material Code: ${f.materialCode||"-"}`,`Consignment Date: ${f.consignmentDate||"-"}`];d.selectAll("text").data(p).enter().append("text").attr("x",10).attr("y",(t,e)=>20+e*18).text(t=>t).attr("font-size","12px").attr("fill","#333").style("font-family","Arial, sans-serif")}}}})});
sap.ui.predefine("tmt/treemap/model/Data", [],function(){"use strict";return{getTreeData:function(){return{id:"c1000",name:"Consignment C1000",details:{plant:"Plant X",materialName:"Consignment Material",materialCode:"C1000",consignmentDate:"2025-11-18"},children:[{id:"matA",name:"Material Batch A",details:{plant:"Plant A",materialName:"Material A",materialCode:"matA",consignmentDate:"2025-11-15"},children:[{id:"A1",name:"Batch A1",details:{plant:"Plant A",materialName:"Batch A1",materialCode:"A1",consignmentDate:"2025-11-10"},children:[{id:"A1a",name:"Production Step A1-a",value:1,details:{plant:"Plant A",materialName:"Step A1-a",materialCode:"A1a",consignmentDate:"2025-11-10"}},{id:"A1b",name:"Production Step A1-b",details:{plant:"Plant A",materialName:"Step A1-b",materialCode:"A1b",consignmentDate:"2025-11-11"},children:[{id:"A1b1",name:"Detail A1-b1",value:1,details:{plant:"Plant A",materialName:"Detail A1-b1",materialCode:"A1b1",consignmentDate:"2025-11-11"}},{id:"A1b2",name:"Detail A1-b2",value:1,details:{plant:"Plant A",materialName:"Detail A1-b2",materialCode:"A1b2",consignmentDate:"2025-11-11"}}]}]},{id:"A2",name:"Batch A2",details:{plant:"Plant A",materialName:"Batch A2",materialCode:"A2",consignmentDate:"2025-11-12"},children:[{id:"A2a",name:"Old Batch A2-a",value:1,details:{plant:"Plant A",materialName:"Old Batch A2-a",materialCode:"A2a",consignmentDate:"2025-11-12"}},{id:"A2b",name:"Old Batch A2-b",value:1,details:{plant:"Plant A",materialName:"Old Batch A2-b",materialCode:"A2b",consignmentDate:"2025-11-12"}}]}]},{id:"matB",name:"Material Batch B",details:{plant:"Plant B",materialName:"Material B",materialCode:"matB",consignmentDate:"2025-11-16"},children:[{id:"B1",name:"Batch B1",details:{plant:"Plant B",materialName:"Batch B1",materialCode:"B1",consignmentDate:"2025-11-14"},children:[{id:"B1a",name:"Process B1-a",value:1,details:{plant:"Plant B",materialName:"Process B1-a",materialCode:"B1a",consignmentDate:"2025-11-14"}},{id:"B1b",name:"Process B1-b",value:1,details:{plant:"Plant B",materialName:"Process B1-b",materialCode:"B1b",consignmentDate:"2025-11-14"}}]},{id:"B2",name:"Batch B2",details:{plant:"Plant B",materialName:"Batch B2",materialCode:"B2",consignmentDate:"2025-11-15"},children:[{id:"B2a",name:"Old Process B2-a",details:{plant:"Plant B",materialName:"Old Process B2-a",materialCode:"B2a",consignmentDate:"2025-11-15"},children:[{id:"B2a1",name:"Sub B2-a1",value:1,details:{plant:"Plant B",materialName:"Sub B2-a1",materialCode:"B2a1",consignmentDate:"2025-11-15"}},{id:"B2a2",name:"Sub B2-a2",value:1,details:{plant:"Plant B",materialName:"Sub B2-a2",materialCode:"B2a2",consignmentDate:"2025-11-15"}}]}]}]}]}}}});
sap.ui.predefine("tmt/treemap/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"tmt/treemap/i18n/i18n.properties":'# This is the resource bundle for tmt.treemap\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Tree Map Test\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Tree Map Test',
	"tmt/treemap/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"tmt.treemap","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.19.5"}},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.142.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.suite.ui.commons":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"tmt.treemap.i18n.i18n","supportedLocales":[""]}}},"resources":{"css":[{"uri":"css/style.css"}]},"rootView":{"viewName":"tmt.treemap.view.App","type":"XML","async":true,"id":"App"},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"tmt.treemap.view","controlId":"app","controlAggregation":"pages","async":true,"transition":"slide"},"routes":[{"name":"Main","pattern":"","target":"Main"},{"name":"TreeMap","pattern":"tree/{cons}","target":"TreeMap"}],"targets":{"Main":{"viewName":"Main"},"TreeMap":{"viewName":"TreeMap"}}},"flexBundle":false}}',
	"tmt/treemap/view/App.view.xml":'<mvc:View controllerName="tmt.treemap.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"tmt/treemap/view/Main.view.xml":'<mvc:View controllerName="tmt.treemap.controller.Main"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><Page title="Tree Map Home"><VBox class="sapUiLargeMargin"><Input id="consInput" placeholder="Enter Consignment Number" width="18rem"/><Button text="Show Tree Map" press=".goTreeMap" class="sapUiSmallMarginTop"/></VBox></Page></mvc:View>\n',
	"tmt/treemap/view/TreeMap.view.xml":'<mvc:View\n    controllerName="tmt.treemap.controller.TreeMap"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    displayBlock="true"><Page title="Consignment Decomposition Tree"><content><core:HTML\n                id="decompTreeContainer"\n                content="&lt;div id=\'d3DecompTree\' style=\'width:100%; height:600px;\'&gt;&lt;/div&gt;" /></content></Page></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
